{
  "name": "ghost",
  "functions": {
    "publishCommand": {
      "command": {
        "name": "Ghost: Publish"
      },
      "code": "(() => { var mod=(()=>{var qe=Object.create;var ne=Object.defineProperty;var Ve=Object.getOwnPropertyDescriptor;var Ge=Object.getOwnPropertyNames;var Je=Object.getPrototypeOf,Ze=Object.prototype.hasOwnProperty;var de=(h=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(h,{get:(e,t)=>(typeof require!=\"undefined\"?require:e)[t]}):h)(function(h){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+h+'\" is not supported')});var He=(h,e)=>{for(var t in e)ne(h,t,{get:e[t],enumerable:!0})},Ce=(h,e,t,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of Ge(e))!Ze.call(h,i)&&i!==t&&ne(h,i,{get:()=>e[i],enumerable:!(r=Ve(e,i))||r.enumerable});return h};var Ae=(h,e,t)=>(t=h!=null?qe(Je(h)):{},Ce(e||!h||!h.__esModule?ne(t,\"default\",{value:h,enumerable:!0}):t,h)),Ke=h=>Ce(ne({},\"__esModule\",{value:!0}),h);var pt={};He(pt,{default:()=>dt});var X=self.syscall;async function Ne(h,e,...t){return X(\"system.invokeFunction\",h,e,...t)}function Qe(){return X(\"editor.getCurrentPage\")}function $e(){return X(\"editor.getText\")}var Te=de(\"yaml\");var ut=Ae(de(\"handlebars\")),ct=Ae(de(\"yaml\"));var rt=0,te=class{constructor(e,t){this.from=e,this.to=t}},w=class{constructor(e={}){this.id=rt++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error(\"This node type doesn't define a deserialize function\")})}add(e){if(this.perNode)throw new RangeError(\"Can't add per-node props to node types\");return typeof e!=\"function\"&&(e=C.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}};w.closedBy=new w({deserialize:h=>h.split(\" \")});w.openedBy=new w({deserialize:h=>h.split(\" \")});w.group=new w({deserialize:h=>h.split(\" \")});w.contextHash=new w({perNode:!0});w.lookAhead=new w({perNode:!0});w.mounted=new w({perNode:!0});var it=Object.create(null),C=class{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):it,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new C(e.name||\"\",t,e.id,r);if(e.props){for(let n of e.props)if(Array.isArray(n)||(n=n(i)),n){if(n[0].perNode)throw new RangeError(\"Can't store a per-node prop on a node type\");t[n[0].id]=n[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e==\"string\"){if(this.name==e)return!0;let t=this.prop(w.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(\" \"))t[i]=e[r];return r=>{for(let i=r.prop(w.group),n=-1;n<(i?i.length:0);n++){let s=t[n<0?r.name:i[n]];if(s)return s}}}};C.none=new C(\"\",Object.create(null),0,8);var V=class{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError(\"Node type ids should correspond to array positions when creating a node set\")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let n of e){let s=n(r);s&&(i||(i=Object.assign({},r.props)),i[s[0].id]=s[1])}t.push(i?new C(r.name,i,r.id,r.flags):r)}return new V(t)}},oe=new WeakMap,Me=new WeakMap,R;(function(h){h[h.ExcludeBuffers=1]=\"ExcludeBuffers\",h[h.IncludeAnonymous=2]=\"IncludeAnonymous\",h[h.IgnoreMounts=4]=\"IgnoreMounts\",h[h.IgnoreOverlays=8]=\"IgnoreOverlays\"})(R||(R={}));var T=class{constructor(e,t,r,i,n){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,n&&n.length){this.props=Object.create(null);for(let[s,o]of n)this.props[typeof s==\"number\"?s:s.id]=o}}toString(){let e=this.prop(w.mounted);if(e&&!e.overlay)return e.tree.toString();let t=\"\";for(let r of this.children){let i=r.toString();i&&(t&&(t+=\",\"),t+=i)}return this.type.name?(/\\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?\"(\"+t+\")\":\"\"):t}cursor(e=0){return new J(this.topNode,e)}cursorAt(e,t=0,r=0){let i=oe.get(this)||this.topNode,n=new J(i);return n.moveTo(e,t),oe.set(this,n._tree),n}get topNode(){return new Q(this,0,0,null)}resolve(e,t=0){let r=G(oe.get(this)||this.topNode,e,t,!1);return oe.set(this,r),r}resolveInner(e,t=0){let r=G(Me.get(this)||this.topNode,e,t,!0);return Me.set(this,r),r}iterate(e){let{enter:t,leave:r,from:i=0,to:n=this.length}=e;for(let s=this.cursor((e.mode||0)|R.IncludeAnonymous);;){let o=!1;if(s.from<=n&&s.to>=i&&(s.type.isAnonymous||t(s)!==!1)){if(s.firstChild())continue;o=!0}for(;o&&r&&!s.type.isAnonymous&&r(s),!s.nextSibling();){if(!s.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:we(C.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new T(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new T(C.none,t,r,i)))}static build(e){return st(e)}};T.empty=new T(C.none,[],[],0);var re=class{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new re(this.buffer,this.index)}},_=class{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return C.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(\",\")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],n=i.name;if(/\\W/.test(n)&&!i.isError&&(n=JSON.stringify(n)),e+=4,r==e)return n;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return n+\"(\"+s.join(\",\")+\")\"}findChild(e,t,r,i,n){let{buffer:s}=this,o=-1;for(let l=e;l!=t&&!(Be(n,i,s[l+1],s[l+2])&&(o=l,r>0));l=s[l+3]);return o}slice(e,t,r,i){let n=this.buffer,s=new Uint16Array(t-e);for(let o=e,l=0;o<t;)s[l++]=n[o++],s[l++]=n[o++]-r,s[l++]=n[o++]-r,s[l++]=n[o++]-e;return new _(s,i-r,this.set)}};function Be(h,e,t,r){switch(h){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ue(h,e){let t=h.childBefore(e);for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(h=t,t=r.prevSibling):t=r}return h}function G(h,e,t,r){for(var i;h.from==h.to||(t<1?h.from>=e:h.from>e)||(t>-1?h.to<=e:h.to<e);){let s=!r&&h instanceof Q&&h.index<0?null:h.parent;if(!s)return h;h=s}let n=r?0:R.IgnoreOverlays;if(r)for(let s=h,o=s.parent;o;s=o,o=s.parent)s instanceof Q&&s.index<0&&((i=o.enter(e,t,n))===null||i===void 0?void 0:i.from)!=s.from&&(h=o);for(;;){let s=h.enter(e,t,n);if(!s)return h;h=s}}var Q=class{constructor(e,t,r,i){this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,n=0){for(let s=this;;){for(let{children:o,positions:l}=s._tree,a=t>0?o.length:-1;e!=a;e+=t){let u=o[e],f=l[e]+s.from;if(!!Be(i,r,f,f+u.length)){if(u instanceof _){if(n&R.ExcludeBuffers)continue;let p=u.findChild(0,u.buffer.length,t,r-f,i);if(p>-1)return new I(new pe(s,u,e,f),null,p)}else if(n&R.IncludeAnonymous||!u.type.isAnonymous||me(u)){let p;if(!(n&R.IgnoreMounts)&&u.props&&(p=u.prop(w.mounted))&&!p.overlay)return new Q(p.tree,f,e,s);let x=new Q(u,f,e,s);return n&R.IncludeAnonymous||!x.type.isAnonymous?x:x.nextChild(t<0?u.children.length-1:0,t,r,i)}}}if(n&R.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&R.IgnoreOverlays)&&(i=this._tree.prop(w.mounted))&&i.overlay){let n=e-this.from;for(let{from:s,to:o}of i.overlay)if((t>0?s<=n:s<n)&&(t<0?o>=n:o>n))return new Q(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new J(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return G(this,e,t,!1)}resolveInner(e,t=0){return G(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Ue(this,e)}getChild(e,t=null,r=null){let i=le(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return le(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return ae(this,e)}};function le(h,e,t,r){let i=h.cursor(),n=[];if(!i.firstChild())return n;if(t!=null){for(;!i.type.is(t);)if(!i.nextSibling())return n}for(;;){if(r!=null&&i.type.is(r))return n;if(i.type.is(e)&&n.push(i.node),!i.nextSibling())return r==null?n:[]}}function ae(h,e,t=e.length-1){for(let r=h.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}var pe=class{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}},I=class{constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,r){let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return n<0?null:new I(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&R.ExcludeBuffers)return null;let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new I(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new I(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new I(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new J(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,n=r.buffer[this.index+3];if(n>i){let s=r.buffer[this.index+1],o=r.buffer[this.index+2];e.push(r.slice(i,n,s,o)),t.push(0)}return new T(this.type,e,t,this.to-this.from)}resolve(e,t=0){return G(this,e,t,!1)}resolveInner(e,t=0){return G(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Ue(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let i=le(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return le(this,e,t,r)}get node(){return this}matchContext(e){return ae(this,e)}},J=class{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Q)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Q?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return n<0?!1:(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&R.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&R.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&R.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let n=0;n<this.index;n++)if(i.buffer.buffer[n+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let n=t+e,s=e<0?-1:r._tree.children.length;n!=s;n+=e){let o=r._tree.children[n];if(this.mode&R.IncludeAnonymous||o instanceof _||!o.type.isAnonymous||me(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer){e:for(let i=this.index,n=this.stack.length;n>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,r=n+1;break e}i=this.stack[--n]}}for(let i=r;i<this.stack.length;i++)t=new I(this.buffer,t,this.stack[i]);return this.bufferNode=new I(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return ae(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,n=this.stack.length-1;i>=0;n--){if(n<0)return ae(this.node,e,i);let s=r[t.buffer[this.stack[n]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}};function me(h){return h.children.some(e=>e instanceof _||!e.type.isAnonymous||me(e))}function st(h){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=1024,reused:n=[],minRepeatType:s=r.types.length}=h,o=Array.isArray(t)?new re(t,t.length):t,l=r.types,a=0,u=0;function f(P,b,c,g,O){let{id:m,start:d,end:k,size:v}=o,A=u;for(;v<0;)if(o.next(),v==-1){let j=n[m];c.push(j),g.push(d-P);return}else if(v==-3){a=m;return}else if(v==-4){u=m;return}else throw new RangeError(`Unrecognized record size: ${v}`);let L=l[m],z,D,Se=d-P;if(k-d<=i&&(D=U(o.pos-b,O))){let j=new Uint16Array(D.size-D.skip),N=o.pos-D.size,M=j.length;for(;o.pos>N;)M=ie(D.start,j,M);z=new _(j,k-D.start,r),Se=D.start-P}else{let j=o.pos-v;o.next();let N=[],M=[],Y=m>=s?m:-1,q=0,se=k;for(;o.pos>j;)Y>=0&&o.id==Y&&o.size>=0?(o.end<=se-i&&(x(N,M,d,q,o.end,se,Y,A),q=N.length,se=o.end),o.next()):f(d,j,N,M,Y);if(Y>=0&&q>0&&q<N.length&&x(N,M,d,q,d,se,Y,A),N.reverse(),M.reverse(),Y>-1&&q>0){let ve=p(L);z=we(L,N,M,0,N.length,0,k-d,ve,ve)}else z=y(L,N,M,k-d,A-k)}c.push(z),g.push(Se)}function p(P){return(b,c,g)=>{let O=0,m=b.length-1,d,k;if(m>=0&&(d=b[m])instanceof T){if(!m&&d.type==P&&d.length==g)return d;(k=d.prop(w.lookAhead))&&(O=c[m]+d.length+k)}return y(P,b,c,g,O)}}function x(P,b,c,g,O,m,d,k){let v=[],A=[];for(;P.length>g;)v.push(P.pop()),A.push(b.pop()+c-O);P.push(y(r.types[d],v,A,m-O,k-m)),b.push(O-c)}function y(P,b,c,g,O=0,m){if(a){let d=[w.contextHash,a];m=m?[d].concat(m):[d]}if(O>25){let d=[w.lookAhead,O];m=m?[d].concat(m):[d]}return new T(P,b,c,g,m)}function U(P,b){let c=o.fork(),g=0,O=0,m=0,d=c.end-i,k={size:0,start:0,skip:0};e:for(let v=c.pos-P;c.pos>v;){let A=c.size;if(c.id==b&&A>=0){k.size=g,k.start=O,k.skip=m,m+=4,g+=4,c.next();continue}let L=c.pos-A;if(A<0||L<v||c.start<d)break;let z=c.id>=s?4:0,D=c.start;for(c.next();c.pos>L;){if(c.size<0)if(c.size==-3)z+=4;else break e;else c.id>=s&&(z+=4);c.next()}O=D,g+=A,m+=z}return(b<0||g==P)&&(k.size=g,k.start=O,k.skip=m),k.size>4?k:void 0}function ie(P,b,c){let{id:g,start:O,end:m,size:d}=o;if(o.next(),d>=0&&g<s){let k=c;if(d>4){let v=o.pos-(d-4);for(;o.pos>v;)c=ie(P,b,c)}b[--c]=k,b[--c]=m-P,b[--c]=O-P,b[--c]=g}else d==-3?a=g:d==-4&&(u=g);return c}let F=[],W=[];for(;o.pos>0;)f(h.start||0,h.bufferStart||0,F,W,-1);let S=(e=h.length)!==null&&e!==void 0?e:F.length?W[0]+F[0].length:0;return new T(l[h.topID],F.reverse(),W.reverse(),S)}var _e=new WeakMap;function he(h,e){if(!h.isAnonymous||e instanceof _||e.type!=h)return 1;let t=_e.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=h||!(r instanceof T)){t=1;break}t+=he(h,r)}_e.set(e,t)}return t}function we(h,e,t,r,i,n,s,o,l){let a=0;for(let y=r;y<i;y++)a+=he(h,e[y]);let u=Math.ceil(a*1.5/8),f=[],p=[];function x(y,U,ie,F,W){for(let S=ie;S<F;){let P=S,b=U[S],c=he(h,y[S]);for(S++;S<F;S++){let g=he(h,y[S]);if(c+g>=u)break;c+=g}if(S==P+1){if(c>u){let g=y[P];x(g.children,g.positions,0,g.children.length,U[P]+W);continue}f.push(y[P])}else{let g=U[S-1]+y[S-1].length-b;f.push(we(h,y,U,P,S,b,g,null,l))}p.push(b+W-n)}}return x(e,t,r,i,0),(o||l)(f,p,s)}var fe=class{startParse(e,t,r){return typeof e==\"string\"&&(e=new ge(e)),r=r?r.length?r.map(i=>new te(i.from,i.to)):[new te(0,0)]:[new te(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let n=i.advance();if(n)return n}}},ge=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};var $t=new w({perNode:!0});var K=class{constructor(e,t,r,i,n,s,o,l,a,u=0,f){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=n,this.score=s,this.buffer=o,this.bufferBase=l,this.curContext=a,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?\"!\"+this.score:\"\"}`}static start(e,t,r=0){let i=e.parser.context;return new K(e,[],t,r,r,0,[],0,i?new ce(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,r=e&65535,{parser:i}=this.p,n=i.dynamicPrecedence(r);if(n&&(this.score+=n),t==0){this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),this.reduceContext(r,this.reducePos);return}let s=this.stack.length-(t-1)*3-(e&262144?6:0),o=this.stack[s-2],l=this.stack[s-1],a=this.bufferBase+this.buffer.length-l;if(r<i.minRepeatTerm||e&131072){let u=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,o,u,a+4,!0)}if(e&262144)this.state=this.stack[s];else{let u=this.stack[s-3];this.state=i.getGoto(u,r,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(r,o)}storeNode(e,t,r,i=4,n=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,o=this.buffer.length;if(o==0&&s.parent&&(o=s.bufferBase-s.parent.bufferBase,s=s.parent),o>0&&s.buffer[o-4]==0&&s.buffer[o-1]>-1){if(t==r)return;if(s.buffer[o-2]>=t){s.buffer[o-2]=r;return}}}if(!n||this.pos==r)this.buffer.push(e,t,r,i);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0)for(;s>0&&this.buffer[s-2]>r;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,i>4&&(i-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=r,this.buffer[s+3]=i}}shift(e,t,r){let i=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let n=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(n,1)||(this.reducePos=r)),this.pushState(n,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,r){e&65536?this.reduce(e):this.shift(e,t,r)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new K(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Pe(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((r&65536)==0)return!0;if(r==0)return!1;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let i=[];for(let n=0,s;n<t.length;n+=2)(s=t[n+1])!=this.state&&this.p.parser.hasAction(s,e)&&i.push(t[n],s);if(this.stack.length<120)for(let n=0;i.length<4<<1&&n<t.length;n+=2){let s=t[n+1];i.some((o,l)=>l&1&&o==s)||i.push(t[n],s)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let n=t[i+1];if(n==this.state)continue;let s=this.split();s.pushState(n,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[i],this.pos),s.score-=200,r.push(s)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let r=e>>19,i=e&65535,n=this.stack.length-r*3;if(n<0||t.getGoto(this.stack[n],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new ce(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}},ce=class{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}},ze;(function(h){h[h.Insert=200]=\"Insert\",h[h.Delete=190]=\"Delete\",h[h.Reduce=100]=\"Reduce\",h[h.MaxNext=4]=\"MaxNext\",h[h.MaxInsertStackDepth=300]=\"MaxInsertStackDepth\",h[h.DampenInsertStackDepth=120]=\"DampenInsertStackDepth\"})(ze||(ze={}));var Pe=class{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}},ee=class{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new ee(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new ee(this.stack,this.pos,this.index)}},Z=class{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}},je=new Z,ye=class{constructor(e,t){this.input=e,this.ranges=t,this.chunk=\"\",this.chunkOff=0,this.chunk2=\"\",this.chunk2Pos=0,this.next=-1,this.token=je,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,n=this.pos+e;for(;n<r.from;){if(!i)return null;let s=this.ranges[--i];n-=r.from-s.to,r=s}for(;t<0?n>r.to:n>=r.to;){if(i==this.ranges.length-1)return null;let s=this.ranges[++i];n+=s.from-r.to,r=s}return n}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let n=this.resolveOffset(e,1);if(n==null)return-1;if(r=n,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let s=this.rangeIndex,o=this.range;for(;o.to<=r;)o=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError(\"Token end out of bounds\");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk=\"\",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=je,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk=\"\",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r=\"\";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}},H=class{constructor(e,t){this.data=e,this.id=t}token(e,t){ot(this.data,e,t,this.id)}};H.prototype.contextual=H.prototype.fallback=H.prototype.extend=!1;function ot(h,e,t,r){let i=0,n=1<<r,{parser:s}=t.p,{dialect:o}=s;e:for(;(n&h[i])!=0;){let l=h[i+1];for(let a=i+3;a<l;a+=2)if((h[a+1]&n)>0){let u=h[a];if(o.allows(u)&&(e.token.value==-1||e.token.value==u||s.overrides(u,e.token.value))){e.acceptToken(u);break}}for(let a=e.next,u=0,f=h[i+2];u<f;){let p=u+f>>1,x=l+p+(p<<1),y=h[x],U=h[x+1];if(a<y)f=p;else if(a>=U)u=p+1;else{i=h[x+2],e.advance();continue e}}break}}function ue(h,e=Uint16Array){if(typeof h!=\"string\")return h;let t=null;for(let r=0,i=0;r<h.length;){let n=0;for(;;){let s=h.charCodeAt(r++),o=!1;if(s==126){n=65535;break}s>=92&&s--,s>=34&&s--;let l=s-32;if(l>=46&&(l-=46,o=!0),n+=l,o)break;n*=46}t?t[i++]=n:t=new e(n)}return t}var $=typeof process<\"u\"&&process.env&&/\\bparse\\b/.test(process.env.LOG),xe=null,Xe;(function(h){h[h.Margin=25]=\"Margin\"})(Xe||(Xe={}));function Fe(h,e,t){let r=h.cursor(R.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(h.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:h.length}}var be=class{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Fe(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Fe(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=r.children[i],s=this.start[t]+r.positions[i];if(s>e)return this.nextStart=s,null;if(n instanceof T){if(s==e){if(s<this.safeFrom)return null;let o=s+n.length;if(o<=this.safeTo){let l=n.prop(w.lookAhead);if(!l||o+l<this.fragment.to)return n}}this.index[t]++,s+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+n.length}}},ke=class{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Z)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:n}=i,s=i.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,l=0;for(let a=0;a<n.length;a++){if((1<<a&s)==0)continue;let u=n[a],f=this.tokens[a];if(!(r&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=s||f.context!=o)&&(this.updateCachedToken(f,u,e),f.mask=s,f.context=o),f.lookAhead>f.end+25&&(l=Math.max(f.lookAhead,l)),f.value!=0)){let p=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(r=f,t>p))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new Z,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Z,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){if(t.token(this.stream.reset(r.pos,e),r),e.value>-1){let{parser:i}=r.p;for(let n=0;n<i.specialized.length;n++)if(i.specialized[n]==e.value){let s=i.specializers[n](this.stream.read(e.start,e.end),r);if(s>=0&&r.p.parser.dialect.allows(s>>1)){(s&1)==0?e.value=s>>1:e.extended=s>>1;break}}}else e.value=0,e.end=Math.min(r.p.stream.end,r.pos+1)}putAction(e,t,r,i){for(let n=0;n<i;n+=3)if(this.actions[n]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:n}=e,{parser:s}=e.p,{data:o}=s;for(let l=0;l<2;l++)for(let a=s.stateSlot(n,l?2:1);;a+=3){if(o[a]==65535)if(o[a+1]==1)a=B(o,a+2);else{i==0&&o[a+1]==2&&(i=this.putAction(B(o,a+2),t,r,i));break}o[a]==t&&(i=this.putAction(B(o,a+1),t,r,i))}return i}},Ye;(function(h){h[h.Distance=5]=\"Distance\",h[h.MaxRemainingPerStep=3]=\"MaxRemainingPerStep\",h[h.MinBufferLengthPrune=500]=\"MinBufferLengthPrune\",h[h.ForceReduceLimit=10]=\"ForceReduceLimit\",h[h.CutDepth=15e3]=\"CutDepth\",h[h.CutTo=9e3]=\"CutTo\"})(Ye||(Ye={}));var Oe=class{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new ye(t,i),this.tokens=new ke(e,this.stream),this.topTerm=e.top[1];let{from:n}=i[0];this.stacks=[K.start(this,e.top[0],n)],this.fragments=r.length&&this.stream.end-n>e.bufferLength*4?new be(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,n;for(let s=0;s<e.length;s++){let o=e[s];for(;;){if(this.tokens.mainToken=null,o.pos>t)r.push(o);else{if(this.advanceStack(o,r,e))continue;{i||(i=[],n=[]),i.push(o);let l=this.tokens.getMainToken(o);n.push(l.value,l.end)}}break}}if(!r.length){let s=i&&ht(i);if(s)return this.stackToTree(s);if(this.parser.strict)throw $&&i&&console.log(\"Stuck with token \"+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):\"none\")),new SyntaxError(\"No parse at \"+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let s=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,n,r);if(s)return this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(r.length>s)for(r.sort((o,l)=>l.score-o.score);r.length>s;)r.pop();r.some(o=>o.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let s=0;s<r.length-1;s++){let o=r[s];for(let l=s+1;l<r.length;l++){let a=r[l];if(o.sameState(a)||o.buffer.length>500&&a.buffer.length>500)if((o.score-a.score||o.buffer.length-a.buffer.length)>0)r.splice(l--,1);else{r.splice(s--,1);continue e}}}}this.minStackPos=r[0].pos;for(let s=1;s<r.length;s++)r[s].pos<this.minStackPos&&(this.minStackPos=r[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError(\"Can't move stoppedAt forward\");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:n}=this,s=$?this.stackID(e)+\" -> \":\"\";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let a=e.curContext&&e.curContext.tracker.strict,u=a?e.curContext.hash:0;for(let f=this.fragments.nodeAt(i);f;){let p=this.parser.nodeSet.types[f.type.id]==f.type?n.getGoto(e.state,f.type.id):-1;if(p>-1&&f.length&&(!a||(f.prop(w.contextHash)||0)==u))return e.useNode(f,p),$&&console.log(s+this.stackID(e)+` (via reuse of ${n.getName(f.type.id)})`),!0;if(!(f instanceof T)||f.children.length==0||f.positions[0]>0)break;let x=f.children[0];if(x instanceof T&&f.positions[0]==0)f=x;else break}}let o=n.stateSlot(e.state,4);if(o>0)return e.reduce(o),$&&console.log(s+this.stackID(e)+` (via always-reduce ${n.getName(o&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let a=0;a<l.length;){let u=l[a++],f=l[a++],p=l[a++],x=a==l.length||!r,y=x?e:e.split();if(y.apply(u,f,p),$&&console.log(s+this.stackID(y)+` (via ${(u&65536)==0?\"shift\":`reduce of ${n.getName(u&65535)}`} for ${n.getName(f)} @ ${i}${y==e?\"\":\", split\"})`),x)return!0;y.pos>i?t.push(y):r.push(y)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return Ee(e,t),!0}}runRecovery(e,t,r){let i=null,n=!1;for(let s=0;s<e.length;s++){let o=e[s],l=t[s<<1],a=t[(s<<1)+1],u=$?this.stackID(o)+\" -> \":\"\";if(o.deadEnd&&(n||(n=!0,o.restart(),$&&console.log(u+this.stackID(o)+\" (restarted)\"),this.advanceFully(o,r))))continue;let f=o.split(),p=u;for(let x=0;f.forceReduce()&&x<10&&($&&console.log(p+this.stackID(f)+\" (via force-reduce)\"),!this.advanceFully(f,r));x++)$&&(p=this.stackID(f)+\" -> \");for(let x of o.recoverByInsert(l))$&&console.log(u+this.stackID(x)+\" (via recover-insert)\"),this.advanceFully(x,r);this.stream.end>o.pos?(a==o.pos&&(a++,l=0),o.recoverByDelete(l,a),$&&console.log(u+this.stackID(o)+` (via recover-delete ${this.parser.getName(l)})`),Ee(o,r)):(!i||i.score<o.score)&&(i=o)}return i}stackToTree(e){return e.close(),T.build({buffer:ee.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(xe||(xe=new WeakMap)).get(e);return t||xe.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}};function Ee(h,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==h.pos&&r.sameState(h)){e[t].score<h.score&&(e[t]=h);return}}e.push(h)}var Re=class{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}};var E=class extends fe{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(\" \");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push(\"\");let r=Object.keys(e.topRules).map(o=>e.topRules[o][1]),i=[];for(let o=0;o<t.length;o++)i.push([]);function n(o,l,a){i[o].push([l,l.deserialize(String(a))])}if(e.nodeProps)for(let o of e.nodeProps){let l=o[0];typeof l==\"string\"&&(l=w[l]);for(let a=1;a<o.length;){let u=o[a++];if(u>=0)n(u,l,o[a++]);else{let f=o[a+-u];for(let p=-u;p>0;p--)n(o[a++],l,f);a++}}}this.nodeSet=new V(t.map((o,l)=>C.define({name:l>=this.minRepeatTerm?void 0:o,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=1024;let s=ue(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let o=0;o<e.specialized.length;o++)this.specialized[o]=e.specialized[o].term,this.specializers[o]=e.specialized[o].get;this.states=ue(e.states,Uint32Array),this.data=ue(e.stateData),this.goto=ue(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(o=>typeof o==\"number\"?new H(s,o):o),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new Oe(this,e,t,r);for(let n of this.wrappers)i=n(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let n=i[t+1];;){let s=i[n++],o=s&1,l=i[n++];if(o&&r)return l;for(let a=n+(s>>1);n<a;n++)if(i[n]==e)return l;if(o)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let n=this.stateSlot(e,i?2:1),s;;n+=3){if((s=r[n])==65535)if(r[n+1]==1)s=r[n=B(r,n+2)];else{if(r[n+1]==2)return B(r,n+2);break}if(s==t||s==0)return B(r,n+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=B(this.data,r+2);else return!1;if(t==B(this.data,r+1))return!0}}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=B(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];t.some((n,s)=>s&1&&n==i)||t.push(this.data[r],i)}}return t}overrides(e,t){let r=We(this.data,this.tokenPrecTable,t);return r<0||We(this.data,this.tokenPrecTable,e)<r}configure(e){let t=Object.assign(Object.create(E.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(n=>n.from==r);return i?i.to:r})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let n of e.split(\" \")){let s=t.indexOf(n);s>=0&&(r[s]=!0)}let i=null;for(let n=0;n<t.length;n++)if(!r[n])for(let s=this.dialects[t[n]],o;(o=this.data[s++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[o]=1;return new Re(e,r,i)}static deserialize(e){return new E(e)}};function B(h,e){return h[e]|h[e+1]<<16}function We(h,e,t){for(let r=e,i;(i=h[r])!=65535;r++)if(i==t)return r-e;return-1}function ht(h){let e=null;for(let t of h){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}var lt=E.deserialize({version:13,states:\"&fOVQPOOOmQQO'#C^QOQPOOOtQPO'#C`OyQQO'#CkO!OQPO'#CmO!TQPO'#CnO!YQPO'#CoOOQO'#Cp'#CpO!_QQO,58xO!fQQO'#CcO#TQQO'#CaOOQO'#Ca'#CaOOQO,58z,58zO#lQPO,59VOOQO,59X,59XO#qQQO'#D`OOQO,59Y,59YOOQO,59Z,59ZOOQO-E6n-E6nO$YQQO,58}OtQPO,58|O$qQQO1G.qO%]QPO'#CrO%bQQO,59zOOQO'#Cg'#CgOOQO'#Ci'#CiO$YQQO'#CjOOQO'#Cd'#CdOOQO1G.i1G.iOOQO1G.h1G.hOOQO'#Cl'#ClOOQO7+$]7+$]OOQO,59^,59^OOQO-E6p-E6pO%yQPO'#C|O&RQPO,59UO$YQQO'#CqO&WQPO,59hOOQO1G.p1G.pOOQO,59],59]OOQO-E6o-E6o\",stateData:\"&`~OiOS~ORPO~OjRO|SO!QTO!RUO!TVO~OgQX~P[ORYO~O}^O~OX_O~OR`O~OYbO~OgQa~P[OkdOsdOtdOudOvdOwdOxdOydOzdO~O{eOgTXjTX|TX!QTX!RTX!TTX~ORfO~OqgOg!SXj!SX|!SX!Q!SX!R!SX!T!SX~OXlOYlO[lOliOmiOnjOokO~O!OoO!PoOg_ij_i|_i!Q_i!R_i!T_i~ORqO~OqgOg!Saj!Sa|!Sa!Q!Sa!R!Sa!T!Sa~OquOrpX~OrwO~OquOrpa~O\",goto:\"#d!TPP!UP!X!]!`!c!iPP!rP!r!r!X!w!X!X!X!z#Q#WPPPPPPPPP#^PPPPPPPPPPPPPPPPP#aRQOTWPXR]RR[RQZRRneQmdQskRxuVldkuRpfQXPRcXQvsRyvQh`RrhRtkRaU\",nodeNames:\"\\u26A0 Program Query Name WhereClause LogicalExpr AndExpr FilterExpr Value Number String Bool Regex Null List OrderClause Order LimitClause SelectClause RenderClause\",maxTerm:51,skippedNodes:[0],repeatNodeCount:3,tokenData:\"Ap~R}X^$Opq$Oqr$srs%W|}%r}!O%w!P!Q&Y!Q!['P!^!_'X!_!`'f!`!a's!c!}%w!}#O(Q#P#Q(V#R#S%w#T#U([#U#V*q#V#W%w#W#X+m#X#Y%w#Y#Z-i#Z#]%w#]#^/y#^#`%w#`#a0u#a#b%w#b#c3Y#c#d5U#d#f%w#f#g7i#g#h:e#h#i=a#i#k%w#k#l?]#l#o%w#y#z$O$f$g$O#BY#BZ$O$IS$I_$O$Ip$Iq%W$Iq$Ir%W$I|$JO$O$JT$JU$O$KV$KW$O&FU&FV$O~$TYi~X^$Opq$O#y#z$O$f$g$O#BY#BZ$O$IS$I_$O$I|$JO$O$JT$JU$O$KV$KW$O&FU&FV$O~$vP!_!`$y~%OPu~#r#s%R~%WOy~~%ZUOr%Wrs%ms$Ip%W$Ip$Iq%m$Iq$Ir%m$Ir~%W~%rOY~~%wOq~P%|SRP}!O%w!c!}%w#R#S%w#T#o%w~&_V[~OY&YZ]&Y^!P&Y!P!Q&t!Q#O&Y#O#P&y#P~&Y~&yO[~~&|PO~&Y~'UPX~!Q!['P~'^Pk~!_!`'a~'fOs~~'kPt~#r#s'n~'sOx~~'xPw~!_!`'{~(QOv~~(VOo~~([Or~R(aWRP}!O%w!c!}%w#R#S%w#T#b%w#b#c(y#c#g%w#g#h)u#h#o%wR)OURP}!O%w!c!}%w#R#S%w#T#W%w#W#X)b#X#o%wR)iS{QRP}!O%w!c!}%w#R#S%w#T#o%wR)zURP}!O%w!c!}%w#R#S%w#T#V%w#V#W*^#W#o%wR*eS!PQRP}!O%w!c!}%w#R#S%w#T#o%wR*vURP}!O%w!c!}%w#R#S%w#T#m%w#m#n+Y#n#o%wR+aS}QRP}!O%w!c!}%w#R#S%w#T#o%wR+rURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y,U#Y#o%wR,ZURP}!O%w!c!}%w#R#S%w#T#g%w#g#h,m#h#o%wR,rURP}!O%w!c!}%w#R#S%w#T#V%w#V#W-U#W#o%wR-]S!OQRP}!O%w!c!}%w#R#S%w#T#o%wR-nTRP}!O%w!c!}%w#R#S%w#T#U-}#U#o%wR.SURP}!O%w!c!}%w#R#S%w#T#`%w#`#a.f#a#o%wR.kURP}!O%w!c!}%w#R#S%w#T#g%w#g#h.}#h#o%wR/SURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y/f#Y#o%wR/mSmQRP}!O%w!c!}%w#R#S%w#T#o%wR0OURP}!O%w!c!}%w#R#S%w#T#b%w#b#c0b#c#o%wR0iSzQRP}!O%w!c!}%w#R#S%w#T#o%wR0zURP}!O%w!c!}%w#R#S%w#T#]%w#]#^1^#^#o%wR1cURP}!O%w!c!}%w#R#S%w#T#a%w#a#b1u#b#o%wR1zURP}!O%w!c!}%w#R#S%w#T#]%w#]#^2^#^#o%wR2cURP}!O%w!c!}%w#R#S%w#T#h%w#h#i2u#i#o%wR2|S!QQRP}!O%w!c!}%w#R#S%w#T#o%wR3_URP}!O%w!c!}%w#R#S%w#T#i%w#i#j3q#j#o%wR3vURP}!O%w!c!}%w#R#S%w#T#`%w#`#a4Y#a#o%wR4_URP}!O%w!c!}%w#R#S%w#T#`%w#`#a4q#a#o%wR4xSnQRP}!O%w!c!}%w#R#S%w#T#o%wR5ZURP}!O%w!c!}%w#R#S%w#T#f%w#f#g5m#g#o%wR5rURP}!O%w!c!}%w#R#S%w#T#W%w#W#X6U#X#o%wR6ZURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y6m#Y#o%wR6rURP}!O%w!c!}%w#R#S%w#T#f%w#f#g7U#g#o%wR7]S|QRP}!O%w!c!}%w#R#S%w#T#o%wR7nURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y8Q#Y#o%wR8VURP}!O%w!c!}%w#R#S%w#T#b%w#b#c8i#c#o%wR8nURP}!O%w!c!}%w#R#S%w#T#W%w#W#X9Q#X#o%wR9VURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y9i#Y#o%wR9nURP}!O%w!c!}%w#R#S%w#T#f%w#f#g:Q#g#o%wR:XS!TQRP}!O%w!c!}%w#R#S%w#T#o%wR:jURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y:|#Y#o%wR;RURP}!O%w!c!}%w#R#S%w#T#`%w#`#a;e#a#o%wR;jURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y;|#Y#o%wR<RURP}!O%w!c!}%w#R#S%w#T#V%w#V#W<e#W#o%wR<jURP}!O%w!c!}%w#R#S%w#T#h%w#h#i<|#i#o%wR=TS!RQRP}!O%w!c!}%w#R#S%w#T#o%wR=fURP}!O%w!c!}%w#R#S%w#T#f%w#f#g=x#g#o%wR=}URP}!O%w!c!}%w#R#S%w#T#i%w#i#j>a#j#o%wR>fURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y>x#Y#o%wR?PSlQRP}!O%w!c!}%w#R#S%w#T#o%wR?bURP}!O%w!c!}%w#R#S%w#T#[%w#[#]?t#]#o%wR?yURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y@]#Y#o%wR@bURP}!O%w!c!}%w#R#S%w#T#f%w#f#g@t#g#o%wR@yURP}!O%w!c!}%w#R#S%w#T#X%w#X#YA]#Y#o%wRAdSjQRP}!O%w!c!}%w#R#S%w#T#o%w\",tokenizers:[0,1],topRules:{Program:[0,1]},tokenPrec:0});async function Le(){await Ne(\"server\",\"publish\",await Qe(),await $e())}var dt=Le;return Ke(pt);})();\n return mod;})()"
    },
    "publish": {
      "env": "server",
      "code": "(() => { var mod=(()=>{var Ze=Object.create;var le=Object.defineProperty;var He=Object.getOwnPropertyDescriptor;var Ke=Object.getOwnPropertyNames;var et=Object.getPrototypeOf,tt=Object.prototype.hasOwnProperty;var xe=(o=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(o,{get:(e,t)=>(typeof require!=\"undefined\"?require:e)[t]}):o)(function(o){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+o+'\" is not supported')});var rt=(o,e)=>{for(var t in e)le(o,t,{get:e[t],enumerable:!0})},Me=(o,e,t,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of Ke(e))!tt.call(o,i)&&i!==t&&le(o,i,{get:()=>e[i],enumerable:!(r=He(e,i))||r.enumerable});return o};var _e=(o,e,t)=>(t=o!=null?Ze(et(o)):{},Me(e||!o||!o.__esModule?le(t,\"default\",{value:o,enumerable:!0}):t,o)),it=o=>Me(le({},\"__esModule\",{value:!0}),o);var yt={};rt(yt,{default:()=>Pt});var Y=self.syscall;async function Pe(o){return Y(\"space.readPage\",o)}function ye(o,e){if(e(o))return[o];let t=[];if(o.children)for(let r of o.children)t=[...t,...ye(r,e)];return t}function V(o,e){if(o.children){let t=o.children.slice();for(let r of t){let i=e(r);if(i!==void 0){let n=o.children.indexOf(r);i?o.children.splice(n,1,i):o.children.splice(n,1)}else V(r,e)}}}function G(o,e){return ye(o,t=>t.type===e)[0]}function ae(o){let e=[];if(o.text!==void 0)return o.text;for(let t of o.children)e.push(ae(t));return e.join(\"\")}async function fe(o){return Y(\"markdown.parseMarkdown\",o)}function st(o){return o.replaceAll(\" \",\"_\")}async function Be(o){let e=await fe(o);return V(e,t=>{if(t.type===\"WikiLink\"){let r=t.children[1].children[0].text;return{text:`[${r}](/${st(r)})`}}if(t.type===\"CommentBlock\"||t.type===\"Comment\")return null;if(t.type===\"FencedCode\"){let r=G(t,\"CodeInfo\");if(!r)return;if(r.children[0].text===\"meta\")return null}}),ae(e)}var ne=xe(\"yaml\");var dt=_e(xe(\"handlebars\")),pt=_e(xe(\"yaml\"));var nt=0,ie=class{constructor(e,t){this.from=e,this.to=t}},w=class{constructor(e={}){this.id=nt++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error(\"This node type doesn't define a deserialize function\")})}add(e){if(this.perNode)throw new RangeError(\"Can't add per-node props to node types\");return typeof e!=\"function\"&&(e=C.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}};w.closedBy=new w({deserialize:o=>o.split(\" \")});w.openedBy=new w({deserialize:o=>o.split(\" \")});w.group=new w({deserialize:o=>o.split(\" \")});w.contextHash=new w({perNode:!0});w.lookAhead=new w({perNode:!0});w.mounted=new w({perNode:!0});var ot=Object.create(null),C=class{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):ot,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new C(e.name||\"\",t,e.id,r);if(e.props){for(let n of e.props)if(Array.isArray(n)||(n=n(i)),n){if(n[0].perNode)throw new RangeError(\"Can't store a per-node prop on a node type\");t[n[0].id]=n[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e==\"string\"){if(this.name==e)return!0;let t=this.prop(w.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(\" \"))t[i]=e[r];return r=>{for(let i=r.prop(w.group),n=-1;n<(i?i.length:0);n++){let s=t[n<0?r.name:i[n]];if(s)return s}}}};C.none=new C(\"\",Object.create(null),0,8);var J=class{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError(\"Node type ids should correspond to array positions when creating a node set\")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let n of e){let s=n(r);s&&(i||(i=Object.assign({},r.props)),i[s[0].id]=s[1])}t.push(i?new C(r.name,i,r.id,r.flags):r)}return new J(t)}},ue=new WeakMap,Ue=new WeakMap,R;(function(o){o[o.ExcludeBuffers=1]=\"ExcludeBuffers\",o[o.IncludeAnonymous=2]=\"IncludeAnonymous\",o[o.IgnoreMounts=4]=\"IgnoreMounts\",o[o.IgnoreOverlays=8]=\"IgnoreOverlays\"})(R||(R={}));var T=class{constructor(e,t,r,i,n){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,n&&n.length){this.props=Object.create(null);for(let[s,h]of n)this.props[typeof s==\"number\"?s:s.id]=h}}toString(){let e=this.prop(w.mounted);if(e&&!e.overlay)return e.tree.toString();let t=\"\";for(let r of this.children){let i=r.toString();i&&(t&&(t+=\",\"),t+=i)}return this.type.name?(/\\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?\"(\"+t+\")\":\"\"):t}cursor(e=0){return new H(this.topNode,e)}cursorAt(e,t=0,r=0){let i=ue.get(this)||this.topNode,n=new H(i);return n.moveTo(e,t),ue.set(this,n._tree),n}get topNode(){return new Q(this,0,0,null)}resolve(e,t=0){let r=Z(ue.get(this)||this.topNode,e,t,!1);return ue.set(this,r),r}resolveInner(e,t=0){let r=Z(Ue.get(this)||this.topNode,e,t,!0);return Ue.set(this,r),r}iterate(e){let{enter:t,leave:r,from:i=0,to:n=this.length}=e;for(let s=this.cursor((e.mode||0)|R.IncludeAnonymous);;){let h=!1;if(s.from<=n&&s.to>=i&&(s.type.isAnonymous||t(s)!==!1)){if(s.firstChild())continue;h=!0}for(;h&&r&&!s.type.isAnonymous&&r(s),!s.nextSibling();){if(!s.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Re(C.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new T(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new T(C.none,t,r,i)))}static build(e){return ht(e)}};T.empty=new T(C.none,[],[],0);var se=class{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new se(this.buffer,this.index)}},_=class{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return C.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(\",\")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],n=i.name;if(/\\W/.test(n)&&!i.isError&&(n=JSON.stringify(n)),e+=4,r==e)return n;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return n+\"(\"+s.join(\",\")+\")\"}findChild(e,t,r,i,n){let{buffer:s}=this,h=-1;for(let l=e;l!=t&&!(je(n,i,s[l+1],s[l+2])&&(h=l,r>0));l=s[l+3]);return h}slice(e,t,r,i){let n=this.buffer,s=new Uint16Array(t-e);for(let h=e,l=0;h<t;)s[l++]=n[h++],s[l++]=n[h++]-r,s[l++]=n[h++]-r,s[l++]=n[h++]-e;return new _(s,i-r,this.set)}};function je(o,e,t,r){switch(o){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Xe(o,e){let t=o.childBefore(e);for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(o=t,t=r.prevSibling):t=r}return o}function Z(o,e,t,r){for(var i;o.from==o.to||(t<1?o.from>=e:o.from>e)||(t>-1?o.to<=e:o.to<e);){let s=!r&&o instanceof Q&&o.index<0?null:o.parent;if(!s)return o;o=s}let n=r?0:R.IgnoreOverlays;if(r)for(let s=o,h=s.parent;h;s=h,h=s.parent)s instanceof Q&&s.index<0&&((i=h.enter(e,t,n))===null||i===void 0?void 0:i.from)!=s.from&&(o=h);for(;;){let s=o.enter(e,t,n);if(!s)return o;o=s}}var Q=class{constructor(e,t,r,i){this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,n=0){for(let s=this;;){for(let{children:h,positions:l}=s._tree,a=t>0?h.length:-1;e!=a;e+=t){let u=h[e],f=l[e]+s.from;if(!!je(i,r,f,f+u.length)){if(u instanceof _){if(n&R.ExcludeBuffers)continue;let p=u.findChild(0,u.buffer.length,t,r-f,i);if(p>-1)return new I(new be(s,u,e,f),null,p)}else if(n&R.IncludeAnonymous||!u.type.isAnonymous||Oe(u)){let p;if(!(n&R.IgnoreMounts)&&u.props&&(p=u.prop(w.mounted))&&!p.overlay)return new Q(p.tree,f,e,s);let x=new Q(u,f,e,s);return n&R.IncludeAnonymous||!x.type.isAnonymous?x:x.nextChild(t<0?u.children.length-1:0,t,r,i)}}}if(n&R.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&R.IgnoreOverlays)&&(i=this._tree.prop(w.mounted))&&i.overlay){let n=e-this.from;for(let{from:s,to:h}of i.overlay)if((t>0?s<=n:s<n)&&(t<0?h>=n:h>n))return new Q(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new H(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Z(this,e,t,!1)}resolveInner(e,t=0){return Z(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Xe(this,e)}getChild(e,t=null,r=null){let i=de(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return de(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return pe(this,e)}};function de(o,e,t,r){let i=o.cursor(),n=[];if(!i.firstChild())return n;if(t!=null){for(;!i.type.is(t);)if(!i.nextSibling())return n}for(;;){if(r!=null&&i.type.is(r))return n;if(i.type.is(e)&&n.push(i.node),!i.nextSibling())return r==null?n:[]}}function pe(o,e,t=e.length-1){for(let r=o.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}var be=class{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}},I=class{constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,r){let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return n<0?null:new I(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&R.ExcludeBuffers)return null;let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new I(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new I(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new I(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new H(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,n=r.buffer[this.index+3];if(n>i){let s=r.buffer[this.index+1],h=r.buffer[this.index+2];e.push(r.slice(i,n,s,h)),t.push(0)}return new T(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Z(this,e,t,!1)}resolveInner(e,t=0){return Z(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Xe(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let i=de(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return de(this,e,t,r)}get node(){return this}matchContext(e){return pe(this,e)}},H=class{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Q)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Q?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,n=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return n<0?!1:(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&R.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&R.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&R.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let n=0;n<this.index;n++)if(i.buffer.buffer[n+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let n=t+e,s=e<0?-1:r._tree.children.length;n!=s;n+=e){let h=r._tree.children[n];if(this.mode&R.IncludeAnonymous||h instanceof _||!h.type.isAnonymous||Oe(h))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer){e:for(let i=this.index,n=this.stack.length;n>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,r=n+1;break e}i=this.stack[--n]}}for(let i=r;i<this.stack.length;i++)t=new I(this.buffer,t,this.stack[i]);return this.bufferNode=new I(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return pe(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,n=this.stack.length-1;i>=0;n--){if(n<0)return pe(this.node,e,i);let s=r[t.buffer[this.stack[n]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}};function Oe(o){return o.children.some(e=>e instanceof _||!e.type.isAnonymous||Oe(e))}function ht(o){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=1024,reused:n=[],minRepeatType:s=r.types.length}=o,h=Array.isArray(t)?new se(t,t.length):t,l=r.types,a=0,u=0;function f(P,b,c,g,O){let{id:m,start:d,end:k,size:v}=h,A=u;for(;v<0;)if(h.next(),v==-1){let j=n[m];c.push(j),g.push(d-P);return}else if(v==-3){a=m;return}else if(v==-4){u=m;return}else throw new RangeError(`Unrecognized record size: ${v}`);let L=l[m],z,D,Ie=d-P;if(k-d<=i&&(D=U(h.pos-b,O))){let j=new Uint16Array(D.size-D.skip),N=h.pos-D.size,M=j.length;for(;h.pos>N;)M=oe(D.start,j,M);z=new _(j,k-D.start,r),Ie=D.start-P}else{let j=h.pos-v;h.next();let N=[],M=[],F=m>=s?m:-1,q=0,he=k;for(;h.pos>j;)F>=0&&h.id==F&&h.size>=0?(h.end<=he-i&&(x(N,M,d,q,h.end,he,F,A),q=N.length,he=h.end),h.next()):f(d,j,N,M,F);if(F>=0&&q>0&&q<N.length&&x(N,M,d,q,d,he,F,A),N.reverse(),M.reverse(),F>-1&&q>0){let De=p(L);z=Re(L,N,M,0,N.length,0,k-d,De,De)}else z=y(L,N,M,k-d,A-k)}c.push(z),g.push(Ie)}function p(P){return(b,c,g)=>{let O=0,m=b.length-1,d,k;if(m>=0&&(d=b[m])instanceof T){if(!m&&d.type==P&&d.length==g)return d;(k=d.prop(w.lookAhead))&&(O=c[m]+d.length+k)}return y(P,b,c,g,O)}}function x(P,b,c,g,O,m,d,k){let v=[],A=[];for(;P.length>g;)v.push(P.pop()),A.push(b.pop()+c-O);P.push(y(r.types[d],v,A,m-O,k-m)),b.push(O-c)}function y(P,b,c,g,O=0,m){if(a){let d=[w.contextHash,a];m=m?[d].concat(m):[d]}if(O>25){let d=[w.lookAhead,O];m=m?[d].concat(m):[d]}return new T(P,b,c,g,m)}function U(P,b){let c=h.fork(),g=0,O=0,m=0,d=c.end-i,k={size:0,start:0,skip:0};e:for(let v=c.pos-P;c.pos>v;){let A=c.size;if(c.id==b&&A>=0){k.size=g,k.start=O,k.skip=m,m+=4,g+=4,c.next();continue}let L=c.pos-A;if(A<0||L<v||c.start<d)break;let z=c.id>=s?4:0,D=c.start;for(c.next();c.pos>L;){if(c.size<0)if(c.size==-3)z+=4;else break e;else c.id>=s&&(z+=4);c.next()}O=D,g+=A,m+=z}return(b<0||g==P)&&(k.size=g,k.start=O,k.skip=m),k.size>4?k:void 0}function oe(P,b,c){let{id:g,start:O,end:m,size:d}=h;if(h.next(),d>=0&&g<s){let k=c;if(d>4){let v=h.pos-(d-4);for(;h.pos>v;)c=oe(P,b,c)}b[--c]=k,b[--c]=m-P,b[--c]=O-P,b[--c]=g}else d==-3?a=g:d==-4&&(u=g);return c}let X=[],W=[];for(;h.pos>0;)f(o.start||0,o.bufferStart||0,X,W,-1);let S=(e=o.length)!==null&&e!==void 0?e:X.length?W[0]+X[0].length:0;return new T(l[o.topID],X.reverse(),W.reverse(),S)}var ze=new WeakMap;function ce(o,e){if(!o.isAnonymous||e instanceof _||e.type!=o)return 1;let t=ze.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=o||!(r instanceof T)){t=1;break}t+=ce(o,r)}ze.set(e,t)}return t}function Re(o,e,t,r,i,n,s,h,l){let a=0;for(let y=r;y<i;y++)a+=ce(o,e[y]);let u=Math.ceil(a*1.5/8),f=[],p=[];function x(y,U,oe,X,W){for(let S=oe;S<X;){let P=S,b=U[S],c=ce(o,y[S]);for(S++;S<X;S++){let g=ce(o,y[S]);if(c+g>=u)break;c+=g}if(S==P+1){if(c>u){let g=y[P];x(g.children,g.positions,0,g.children.length,U[P]+W);continue}f.push(y[P])}else{let g=U[S-1]+y[S-1].length-b;f.push(Re(o,y,U,P,S,b,g,null,l))}p.push(b+W-n)}}return x(e,t,r,i,0),(h||l)(f,p,s)}var ge=class{startParse(e,t,r){return typeof e==\"string\"&&(e=new ke(e)),r=r?r.length?r.map(i=>new ie(i.from,i.to)):[new ie(0,0)]:[new ie(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let n=i.advance();if(n)return n}}},ke=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};var Ut=new w({perNode:!0});var te=class{constructor(e,t,r,i,n,s,h,l,a,u=0,f){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=n,this.score=s,this.buffer=h,this.bufferBase=l,this.curContext=a,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?\"!\"+this.score:\"\"}`}static start(e,t,r=0){let i=e.parser.context;return new te(e,[],t,r,r,0,[],0,i?new we(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,r=e&65535,{parser:i}=this.p,n=i.dynamicPrecedence(r);if(n&&(this.score+=n),t==0){this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),this.reduceContext(r,this.reducePos);return}let s=this.stack.length-(t-1)*3-(e&262144?6:0),h=this.stack[s-2],l=this.stack[s-1],a=this.bufferBase+this.buffer.length-l;if(r<i.minRepeatTerm||e&131072){let u=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,h,u,a+4,!0)}if(e&262144)this.state=this.stack[s];else{let u=this.stack[s-3];this.state=i.getGoto(u,r,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(r,h)}storeNode(e,t,r,i=4,n=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,h=this.buffer.length;if(h==0&&s.parent&&(h=s.bufferBase-s.parent.bufferBase,s=s.parent),h>0&&s.buffer[h-4]==0&&s.buffer[h-1]>-1){if(t==r)return;if(s.buffer[h-2]>=t){s.buffer[h-2]=r;return}}}if(!n||this.pos==r)this.buffer.push(e,t,r,i);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0)for(;s>0&&this.buffer[s-2]>r;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,i>4&&(i-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=r,this.buffer[s+3]=i}}shift(e,t,r){let i=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let n=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(n,1)||(this.reducePos=r)),this.pushState(n,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,r){e&65536?this.reduce(e):this.shift(e,t,r)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new te(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Se(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((r&65536)==0)return!0;if(r==0)return!1;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let i=[];for(let n=0,s;n<t.length;n+=2)(s=t[n+1])!=this.state&&this.p.parser.hasAction(s,e)&&i.push(t[n],s);if(this.stack.length<120)for(let n=0;i.length<4<<1&&n<t.length;n+=2){let s=t[n+1];i.some((h,l)=>l&1&&h==s)||i.push(t[n],s)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let n=t[i+1];if(n==this.state)continue;let s=this.split();s.pushState(n,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[i],this.pos),s.score-=200,r.push(s)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let r=e>>19,i=e&65535,n=this.stack.length-r*3;if(n<0||t.getGoto(this.stack[n],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new we(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}},we=class{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}},Fe;(function(o){o[o.Insert=200]=\"Insert\",o[o.Delete=190]=\"Delete\",o[o.Reduce=100]=\"Reduce\",o[o.MaxNext=4]=\"MaxNext\",o[o.MaxInsertStackDepth=300]=\"MaxInsertStackDepth\",o[o.DampenInsertStackDepth=120]=\"DampenInsertStackDepth\"})(Fe||(Fe={}));var Se=class{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}},re=class{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new re(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new re(this.stack,this.pos,this.index)}},K=class{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}},Ye=new K,ve=class{constructor(e,t){this.input=e,this.ranges=t,this.chunk=\"\",this.chunkOff=0,this.chunk2=\"\",this.chunk2Pos=0,this.next=-1,this.token=Ye,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,n=this.pos+e;for(;n<r.from;){if(!i)return null;let s=this.ranges[--i];n-=r.from-s.to,r=s}for(;t<0?n>r.to:n>=r.to;){if(i==this.ranges.length-1)return null;let s=this.ranges[++i];n+=s.from-r.to,r=s}return n}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let n=this.resolveOffset(e,1);if(n==null)return-1;if(r=n,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let s=this.rangeIndex,h=this.range;for(;h.to<=r;)h=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>h.to&&(this.chunk2=this.chunk2.slice(0,h.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError(\"Token end out of bounds\");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk=\"\",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Ye,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk=\"\",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r=\"\";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}},ee=class{constructor(e,t){this.data=e,this.id=t}token(e,t){at(this.data,e,t,this.id)}};ee.prototype.contextual=ee.prototype.fallback=ee.prototype.extend=!1;function at(o,e,t,r){let i=0,n=1<<r,{parser:s}=t.p,{dialect:h}=s;e:for(;(n&o[i])!=0;){let l=o[i+1];for(let a=i+3;a<l;a+=2)if((o[a+1]&n)>0){let u=o[a];if(h.allows(u)&&(e.token.value==-1||e.token.value==u||s.overrides(u,e.token.value))){e.acceptToken(u);break}}for(let a=e.next,u=0,f=o[i+2];u<f;){let p=u+f>>1,x=l+p+(p<<1),y=o[x],U=o[x+1];if(a<y)f=p;else if(a>=U)u=p+1;else{i=o[x+2],e.advance();continue e}}break}}function me(o,e=Uint16Array){if(typeof o!=\"string\")return o;let t=null;for(let r=0,i=0;r<o.length;){let n=0;for(;;){let s=o.charCodeAt(r++),h=!1;if(s==126){n=65535;break}s>=92&&s--,s>=34&&s--;let l=s-32;if(l>=46&&(l-=46,h=!0),n+=l,h)break;n*=46}t?t[i++]=n:t=new e(n)}return t}var $=typeof process<\"u\"&&process.env&&/\\bparse\\b/.test(process.env.LOG),Te=null,Ee;(function(o){o[o.Margin=25]=\"Margin\"})(Ee||(Ee={}));function We(o,e,t){let r=o.cursor(R.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(o.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:o.length}}var Ce=class{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?We(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?We(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=r.children[i],s=this.start[t]+r.positions[i];if(s>e)return this.nextStart=s,null;if(n instanceof T){if(s==e){if(s<this.safeFrom)return null;let h=s+n.length;if(h<=this.safeTo){let l=n.prop(w.lookAhead);if(!l||h+l<this.fragment.to)return n}}this.index[t]++,s+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+n.length}}},Ae=class{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new K)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:n}=i,s=i.stateSlot(e.state,3),h=e.curContext?e.curContext.hash:0,l=0;for(let a=0;a<n.length;a++){if((1<<a&s)==0)continue;let u=n[a],f=this.tokens[a];if(!(r&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=s||f.context!=h)&&(this.updateCachedToken(f,u,e),f.mask=s,f.context=h),f.lookAhead>f.end+25&&(l=Math.max(f.lookAhead,l)),f.value!=0)){let p=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(r=f,t>p))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new K,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new K,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){if(t.token(this.stream.reset(r.pos,e),r),e.value>-1){let{parser:i}=r.p;for(let n=0;n<i.specialized.length;n++)if(i.specialized[n]==e.value){let s=i.specializers[n](this.stream.read(e.start,e.end),r);if(s>=0&&r.p.parser.dialect.allows(s>>1)){(s&1)==0?e.value=s>>1:e.extended=s>>1;break}}}else e.value=0,e.end=Math.min(r.p.stream.end,r.pos+1)}putAction(e,t,r,i){for(let n=0;n<i;n+=3)if(this.actions[n]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:n}=e,{parser:s}=e.p,{data:h}=s;for(let l=0;l<2;l++)for(let a=s.stateSlot(n,l?2:1);;a+=3){if(h[a]==65535)if(h[a+1]==1)a=B(h,a+2);else{i==0&&h[a+1]==2&&(i=this.putAction(B(h,a+2),t,r,i));break}h[a]==t&&(i=this.putAction(B(h,a+1),t,r,i))}return i}},Le;(function(o){o[o.Distance=5]=\"Distance\",o[o.MaxRemainingPerStep=3]=\"MaxRemainingPerStep\",o[o.MinBufferLengthPrune=500]=\"MinBufferLengthPrune\",o[o.ForceReduceLimit=10]=\"ForceReduceLimit\",o[o.CutDepth=15e3]=\"CutDepth\",o[o.CutTo=9e3]=\"CutTo\"})(Le||(Le={}));var Ne=class{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new ve(t,i),this.tokens=new Ae(e,this.stream),this.topTerm=e.top[1];let{from:n}=i[0];this.stacks=[te.start(this,e.top[0],n)],this.fragments=r.length&&this.stream.end-n>e.bufferLength*4?new Ce(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,n;for(let s=0;s<e.length;s++){let h=e[s];for(;;){if(this.tokens.mainToken=null,h.pos>t)r.push(h);else{if(this.advanceStack(h,r,e))continue;{i||(i=[],n=[]),i.push(h);let l=this.tokens.getMainToken(h);n.push(l.value,l.end)}}break}}if(!r.length){let s=i&&ft(i);if(s)return this.stackToTree(s);if(this.parser.strict)throw $&&i&&console.log(\"Stuck with token \"+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):\"none\")),new SyntaxError(\"No parse at \"+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let s=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,n,r);if(s)return this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(r.length>s)for(r.sort((h,l)=>l.score-h.score);r.length>s;)r.pop();r.some(h=>h.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let s=0;s<r.length-1;s++){let h=r[s];for(let l=s+1;l<r.length;l++){let a=r[l];if(h.sameState(a)||h.buffer.length>500&&a.buffer.length>500)if((h.score-a.score||h.buffer.length-a.buffer.length)>0)r.splice(l--,1);else{r.splice(s--,1);continue e}}}}this.minStackPos=r[0].pos;for(let s=1;s<r.length;s++)r[s].pos<this.minStackPos&&(this.minStackPos=r[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError(\"Can't move stoppedAt forward\");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:n}=this,s=$?this.stackID(e)+\" -> \":\"\";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let a=e.curContext&&e.curContext.tracker.strict,u=a?e.curContext.hash:0;for(let f=this.fragments.nodeAt(i);f;){let p=this.parser.nodeSet.types[f.type.id]==f.type?n.getGoto(e.state,f.type.id):-1;if(p>-1&&f.length&&(!a||(f.prop(w.contextHash)||0)==u))return e.useNode(f,p),$&&console.log(s+this.stackID(e)+` (via reuse of ${n.getName(f.type.id)})`),!0;if(!(f instanceof T)||f.children.length==0||f.positions[0]>0)break;let x=f.children[0];if(x instanceof T&&f.positions[0]==0)f=x;else break}}let h=n.stateSlot(e.state,4);if(h>0)return e.reduce(h),$&&console.log(s+this.stackID(e)+` (via always-reduce ${n.getName(h&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let a=0;a<l.length;){let u=l[a++],f=l[a++],p=l[a++],x=a==l.length||!r,y=x?e:e.split();if(y.apply(u,f,p),$&&console.log(s+this.stackID(y)+` (via ${(u&65536)==0?\"shift\":`reduce of ${n.getName(u&65535)}`} for ${n.getName(f)} @ ${i}${y==e?\"\":\", split\"})`),x)return!0;y.pos>i?t.push(y):r.push(y)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return qe(e,t),!0}}runRecovery(e,t,r){let i=null,n=!1;for(let s=0;s<e.length;s++){let h=e[s],l=t[s<<1],a=t[(s<<1)+1],u=$?this.stackID(h)+\" -> \":\"\";if(h.deadEnd&&(n||(n=!0,h.restart(),$&&console.log(u+this.stackID(h)+\" (restarted)\"),this.advanceFully(h,r))))continue;let f=h.split(),p=u;for(let x=0;f.forceReduce()&&x<10&&($&&console.log(p+this.stackID(f)+\" (via force-reduce)\"),!this.advanceFully(f,r));x++)$&&(p=this.stackID(f)+\" -> \");for(let x of h.recoverByInsert(l))$&&console.log(u+this.stackID(x)+\" (via recover-insert)\"),this.advanceFully(x,r);this.stream.end>h.pos?(a==h.pos&&(a++,l=0),h.recoverByDelete(l,a),$&&console.log(u+this.stackID(h)+` (via recover-delete ${this.parser.getName(l)})`),qe(h,r)):(!i||i.score<h.score)&&(i=h)}return i}stackToTree(e){return e.close(),T.build({buffer:re.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Te||(Te=new WeakMap)).get(e);return t||Te.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}};function qe(o,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==o.pos&&r.sameState(o)){e[t].score<o.score&&(e[t]=o);return}}e.push(o)}var Qe=class{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}};var E=class extends ge{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(\" \");this.minRepeatTerm=t.length;for(let h=0;h<e.repeatNodeCount;h++)t.push(\"\");let r=Object.keys(e.topRules).map(h=>e.topRules[h][1]),i=[];for(let h=0;h<t.length;h++)i.push([]);function n(h,l,a){i[h].push([l,l.deserialize(String(a))])}if(e.nodeProps)for(let h of e.nodeProps){let l=h[0];typeof l==\"string\"&&(l=w[l]);for(let a=1;a<h.length;){let u=h[a++];if(u>=0)n(u,l,h[a++]);else{let f=h[a+-u];for(let p=-u;p>0;p--)n(h[a++],l,f);a++}}}this.nodeSet=new J(t.map((h,l)=>C.define({name:l>=this.minRepeatTerm?void 0:h,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=1024;let s=me(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let h=0;h<e.specialized.length;h++)this.specialized[h]=e.specialized[h].term,this.specializers[h]=e.specialized[h].get;this.states=me(e.states,Uint32Array),this.data=me(e.stateData),this.goto=me(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(h=>typeof h==\"number\"?new ee(s,h):h),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new Ne(this,e,t,r);for(let n of this.wrappers)i=n(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let n=i[t+1];;){let s=i[n++],h=s&1,l=i[n++];if(h&&r)return l;for(let a=n+(s>>1);n<a;n++)if(i[n]==e)return l;if(h)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let n=this.stateSlot(e,i?2:1),s;;n+=3){if((s=r[n])==65535)if(r[n+1]==1)s=r[n=B(r,n+2)];else{if(r[n+1]==2)return B(r,n+2);break}if(s==t||s==0)return B(r,n+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=B(this.data,r+2);else return!1;if(t==B(this.data,r+1))return!0}}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=B(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];t.some((n,s)=>s&1&&n==i)||t.push(this.data[r],i)}}return t}overrides(e,t){let r=Ve(this.data,this.tokenPrecTable,t);return r<0||Ve(this.data,this.tokenPrecTable,e)<r}configure(e){let t=Object.assign(Object.create(E.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(n=>n.from==r);return i?i.to:r})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let n of e.split(\" \")){let s=t.indexOf(n);s>=0&&(r[s]=!0)}let i=null;for(let n=0;n<t.length;n++)if(!r[n])for(let s=this.dialects[t[n]],h;(h=this.data[s++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[h]=1;return new Qe(e,r,i)}static deserialize(e){return new E(e)}};function B(o,e){return o[e]|o[e+1]<<16}function Ve(o,e,t){for(let r=e,i;(i=o[r])!=65535;r++)if(i==t)return r-e;return-1}function ft(o){let e=null;for(let t of o){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}var ut=E.deserialize({version:13,states:\"&fOVQPOOOmQQO'#C^QOQPOOOtQPO'#C`OyQQO'#CkO!OQPO'#CmO!TQPO'#CnO!YQPO'#CoOOQO'#Cp'#CpO!_QQO,58xO!fQQO'#CcO#TQQO'#CaOOQO'#Ca'#CaOOQO,58z,58zO#lQPO,59VOOQO,59X,59XO#qQQO'#D`OOQO,59Y,59YOOQO,59Z,59ZOOQO-E6n-E6nO$YQQO,58}OtQPO,58|O$qQQO1G.qO%]QPO'#CrO%bQQO,59zOOQO'#Cg'#CgOOQO'#Ci'#CiO$YQQO'#CjOOQO'#Cd'#CdOOQO1G.i1G.iOOQO1G.h1G.hOOQO'#Cl'#ClOOQO7+$]7+$]OOQO,59^,59^OOQO-E6p-E6pO%yQPO'#C|O&RQPO,59UO$YQQO'#CqO&WQPO,59hOOQO1G.p1G.pOOQO,59],59]OOQO-E6o-E6o\",stateData:\"&`~OiOS~ORPO~OjRO|SO!QTO!RUO!TVO~OgQX~P[ORYO~O}^O~OX_O~OR`O~OYbO~OgQa~P[OkdOsdOtdOudOvdOwdOxdOydOzdO~O{eOgTXjTX|TX!QTX!RTX!TTX~ORfO~OqgOg!SXj!SX|!SX!Q!SX!R!SX!T!SX~OXlOYlO[lOliOmiOnjOokO~O!OoO!PoOg_ij_i|_i!Q_i!R_i!T_i~ORqO~OqgOg!Saj!Sa|!Sa!Q!Sa!R!Sa!T!Sa~OquOrpX~OrwO~OquOrpa~O\",goto:\"#d!TPP!UP!X!]!`!c!iPP!rP!r!r!X!w!X!X!X!z#Q#WPPPPPPPPP#^PPPPPPPPPPPPPPPPP#aRQOTWPXR]RR[RQZRRneQmdQskRxuVldkuRpfQXPRcXQvsRyvQh`RrhRtkRaU\",nodeNames:\"\\u26A0 Program Query Name WhereClause LogicalExpr AndExpr FilterExpr Value Number String Bool Regex Null List OrderClause Order LimitClause SelectClause RenderClause\",maxTerm:51,skippedNodes:[0],repeatNodeCount:3,tokenData:\"Ap~R}X^$Opq$Oqr$srs%W|}%r}!O%w!P!Q&Y!Q!['P!^!_'X!_!`'f!`!a's!c!}%w!}#O(Q#P#Q(V#R#S%w#T#U([#U#V*q#V#W%w#W#X+m#X#Y%w#Y#Z-i#Z#]%w#]#^/y#^#`%w#`#a0u#a#b%w#b#c3Y#c#d5U#d#f%w#f#g7i#g#h:e#h#i=a#i#k%w#k#l?]#l#o%w#y#z$O$f$g$O#BY#BZ$O$IS$I_$O$Ip$Iq%W$Iq$Ir%W$I|$JO$O$JT$JU$O$KV$KW$O&FU&FV$O~$TYi~X^$Opq$O#y#z$O$f$g$O#BY#BZ$O$IS$I_$O$I|$JO$O$JT$JU$O$KV$KW$O&FU&FV$O~$vP!_!`$y~%OPu~#r#s%R~%WOy~~%ZUOr%Wrs%ms$Ip%W$Ip$Iq%m$Iq$Ir%m$Ir~%W~%rOY~~%wOq~P%|SRP}!O%w!c!}%w#R#S%w#T#o%w~&_V[~OY&YZ]&Y^!P&Y!P!Q&t!Q#O&Y#O#P&y#P~&Y~&yO[~~&|PO~&Y~'UPX~!Q!['P~'^Pk~!_!`'a~'fOs~~'kPt~#r#s'n~'sOx~~'xPw~!_!`'{~(QOv~~(VOo~~([Or~R(aWRP}!O%w!c!}%w#R#S%w#T#b%w#b#c(y#c#g%w#g#h)u#h#o%wR)OURP}!O%w!c!}%w#R#S%w#T#W%w#W#X)b#X#o%wR)iS{QRP}!O%w!c!}%w#R#S%w#T#o%wR)zURP}!O%w!c!}%w#R#S%w#T#V%w#V#W*^#W#o%wR*eS!PQRP}!O%w!c!}%w#R#S%w#T#o%wR*vURP}!O%w!c!}%w#R#S%w#T#m%w#m#n+Y#n#o%wR+aS}QRP}!O%w!c!}%w#R#S%w#T#o%wR+rURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y,U#Y#o%wR,ZURP}!O%w!c!}%w#R#S%w#T#g%w#g#h,m#h#o%wR,rURP}!O%w!c!}%w#R#S%w#T#V%w#V#W-U#W#o%wR-]S!OQRP}!O%w!c!}%w#R#S%w#T#o%wR-nTRP}!O%w!c!}%w#R#S%w#T#U-}#U#o%wR.SURP}!O%w!c!}%w#R#S%w#T#`%w#`#a.f#a#o%wR.kURP}!O%w!c!}%w#R#S%w#T#g%w#g#h.}#h#o%wR/SURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y/f#Y#o%wR/mSmQRP}!O%w!c!}%w#R#S%w#T#o%wR0OURP}!O%w!c!}%w#R#S%w#T#b%w#b#c0b#c#o%wR0iSzQRP}!O%w!c!}%w#R#S%w#T#o%wR0zURP}!O%w!c!}%w#R#S%w#T#]%w#]#^1^#^#o%wR1cURP}!O%w!c!}%w#R#S%w#T#a%w#a#b1u#b#o%wR1zURP}!O%w!c!}%w#R#S%w#T#]%w#]#^2^#^#o%wR2cURP}!O%w!c!}%w#R#S%w#T#h%w#h#i2u#i#o%wR2|S!QQRP}!O%w!c!}%w#R#S%w#T#o%wR3_URP}!O%w!c!}%w#R#S%w#T#i%w#i#j3q#j#o%wR3vURP}!O%w!c!}%w#R#S%w#T#`%w#`#a4Y#a#o%wR4_URP}!O%w!c!}%w#R#S%w#T#`%w#`#a4q#a#o%wR4xSnQRP}!O%w!c!}%w#R#S%w#T#o%wR5ZURP}!O%w!c!}%w#R#S%w#T#f%w#f#g5m#g#o%wR5rURP}!O%w!c!}%w#R#S%w#T#W%w#W#X6U#X#o%wR6ZURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y6m#Y#o%wR6rURP}!O%w!c!}%w#R#S%w#T#f%w#f#g7U#g#o%wR7]S|QRP}!O%w!c!}%w#R#S%w#T#o%wR7nURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y8Q#Y#o%wR8VURP}!O%w!c!}%w#R#S%w#T#b%w#b#c8i#c#o%wR8nURP}!O%w!c!}%w#R#S%w#T#W%w#W#X9Q#X#o%wR9VURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y9i#Y#o%wR9nURP}!O%w!c!}%w#R#S%w#T#f%w#f#g:Q#g#o%wR:XS!TQRP}!O%w!c!}%w#R#S%w#T#o%wR:jURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y:|#Y#o%wR;RURP}!O%w!c!}%w#R#S%w#T#`%w#`#a;e#a#o%wR;jURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y;|#Y#o%wR<RURP}!O%w!c!}%w#R#S%w#T#V%w#V#W<e#W#o%wR<jURP}!O%w!c!}%w#R#S%w#T#h%w#h#i<|#i#o%wR=TS!RQRP}!O%w!c!}%w#R#S%w#T#o%wR=fURP}!O%w!c!}%w#R#S%w#T#f%w#f#g=x#g#o%wR=}URP}!O%w!c!}%w#R#S%w#T#i%w#i#j>a#j#o%wR>fURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y>x#Y#o%wR?PSlQRP}!O%w!c!}%w#R#S%w#T#o%wR?bURP}!O%w!c!}%w#R#S%w#T#[%w#[#]?t#]#o%wR?yURP}!O%w!c!}%w#R#S%w#T#X%w#X#Y@]#Y#o%wR@bURP}!O%w!c!}%w#R#S%w#T#f%w#f#g@t#g#o%wR@yURP}!O%w!c!}%w#R#S%w#T#X%w#X#YA]#Y#o%wRAdSjQRP}!O%w!c!}%w#R#S%w#T#o%w\",tokenizers:[0,1],topRules:{Program:[0,1]},tokenPrec:0});function Ge(o,e=[]){let t={};return V(o,r=>{if(r.type!==\"FencedCode\")return;let i=G(r,\"CodeInfo\");if(!i||i.children[0].text!==\"meta\")return;let n=G(r,\"CodeText\");if(!n)return;let s=n.children[0].text;if(t=(0,ne.parse)(s),e.length>0){let h={...t};for(let l of e)delete h[l];n.children[0].text=(0,ne.stringify)(h).trim()}}),t}function gt(o){return JSON.stringify({version:\"0.3.1\",atoms:[],cards:[[\"markdown\",{markdown:o}]],markups:[],sections:[[10,0],[1,\"p\",[]]]})}var $e=class{constructor(e,t){this.url=e;this.key=t}async init(){let[e,t]=this.key.split(\":\");this.token=await self.syscall(\"jwt.jwt\",t,e,\"HS256\",\"5m\",\"/v3/admin/\")}async listPosts(){return(await(await fetch(`${this.url}/ghost/api/v3/admin/posts?order=published_at+DESC`,{headers:{Authorization:`Ghost ${this.token}`}})).json()).posts}async listMarkdownPosts(){let e=[];for(let t of await this.listPosts()){let r=JSON.parse(t.mobiledoc);r.cards.length>0&&r.cards[0][0]===\"markdown\"&&e.push(t)}return e}publishPost(e){return this.publish(\"posts\",e)}publishPage(e){return this.publish(\"pages\",e)}async publish(e,t){let i=await(await fetch(`${this.url}/ghost/api/v3/admin/${e}/slug/${t.slug}`,{headers:{Authorization:`Ghost ${this.token}`,\"Content-Type\":\"application/json\"}})).json();if(i[e]){let n=i[e][0];return t.updated_at=n.updated_at,(await(await fetch(`${this.url}/ghost/api/v3/admin/${e}/${n.id}`,{method:\"PUT\",headers:{Authorization:`Ghost ${this.token}`,\"Content-Type\":\"application/json\"},body:JSON.stringify({[e]:[t]})})).json())[e][0]}else return t.status||(t.status=\"draft\"),(await(await fetch(`${this.url}/ghost/api/v3/admin/${e}`,{method:\"POST\",headers:{Authorization:`Ghost ${this.token}`,\"Content-Type\":\"application/json\"},body:JSON.stringify({[e]:[t]})})).json())[e][0]}};var mt=/#\\s*([^\\n]+)\\n([^$]+)$/;async function wt(o){let e=mt.exec(o);if(e){let[,t,r]=e;return{title:t,mobiledoc:gt(await Be(r))}}throw Error(\"Post should stat with a # header\")}async function xt(){let{text:o}=await Pe(\"ghost-config\"),e=await fe(o);return await Ge(e)}async function Je(o,e){let t=await xt(),r=new $e(t.url,t.adminKey);await r.init();let i=await wt(e);o.startsWith(t.postPrefix)?(i.slug=o.substring(t.postPrefix.length+1),await r.publishPost(i),console.log(\"Done!\")):o.startsWith(t.pagePrefix)?(i.slug=o.substring(t.pagePrefix.length+1),await r.publishPage(i),console.log(\"Done!\")):console.error(\"Not in either the post or page prefix\")}var Pt=Je;return it(yt);})();\n return mod;})()"
    }
  }
}